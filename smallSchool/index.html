
<!DOCTYPE html>
<html>
<head>
    <meta charset='utf-8' />
    <title></title>
    <meta name='viewport' content='initial-scale=1,maximum-scale=1,user-scalable=no' />
	<script src='https://api.mapbox.com/mapbox-gl-js/v1.8.1/mapbox-gl.js'></script>
	<link href='https://api.mapbox.com/mapbox-gl-js/v1.8.1/mapbox-gl.css' rel='stylesheet' />
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">

    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Mitr|Athiti">

    <style>
        body { margin:0; padding:0; }
        #map { position:absolute; top:0; bottom:0; width:100%; }
        body, p {  font-family: 'Athiti', sans-serif; font-size: 20px; } 
        h1, h2 {   font-family: 'Mitr', sans-serif;  text-align: left; }
        h3, h4, h5, h6 {   font-family: 'Athiti', sans-serif; text-align: left; }


    </style>
</head>
<body>

<style>
#map {
    position: fixed;
    width:50%;
}
#features {
    width: 50%;
    margin-left: 50%;
    font-family: serif;
    overflow-y: scroll;
    background-color: #fafafa;

}

/*body {
    background-color: #293457; 
}*/

section {
    padding:  150px 100px;
    /*line-height: 25px;*/
    /*border-bottom: 1px solid #ddd;*/
    /*opacity: 0.25;*/
    font-size: 18px;
    background-color: #293457;
}

section.first { 
    padding: 0 0;
}

/*section.active {
    opacity: 1;
    background-color: #FFF2D2;

}*/
section:last-child {
    border-bottom: none;
    margin-bottom: 100px;   
    padding-bottom: 100px; 
}

.title {
    text-align: center;
}

.title.blue{
    color: #1A68FF;    
}

.title.black{
    color: #000000;
}

.header {
    /*text-align: left;*/
    font-weight: bolder; 
    color: #F85900;
    text-decoration: underline;  
    font-size: 60px;
    /*padding: 44px;*/
    padding-bottom: 30px;
    font-family: 'Mitr';
}
.header.blue {
    color: #1A68FF;     
    text-decoration: underline;  
}
.header.frontpage {
    padding-left: 44px
}

.question {
    color: #F85900;   
    font-size: 32px;
  
}

.legend {
    text-align: left;
    text-decoration: underline;  
    color: #F85900;
    font-size: 20px;
}


div {
    /*padding: 25x 25x;*/
    /*background-color: grey;*/
}

.paper {
    border-radius: 20px;
    padding: 40px 40px 20px 40px;   
    background-color: white;
}

img {
  display: block;
  /*margin-left: auto;*/
  /*margin-right: auto;*/
  margin: auto;
  max-height: 100%;
}

img.logo {
  max-width: 100%;
}

#circle {
    border-radius: 50%;
    width: 28px;
    height: 28px;
    -webkit-border-radius: 14px;
    -moz-border-radius: 14px;
    border-radius: 14px;
}

.yellow {
    background: yellow;
}

.circle {
    border-radius: 50%;
    width: 28px;
    height: 28px;
    -webkit-border-radius: 14px;
    -moz-border-radius: 14px;
    border-radius: 14px;    
}

.yellow {
    background: #F8D105;
}

.green {
    background: #85C731;
}

.orange {
    background: #F85900;
}

</style>
<script>
    function loadCase(caseNo) {
        map.setFilter('Case', ["in", 'ToStay', '0.00', caseNo]); 

}</script>

<div id='map'></div>
<div id='features' style="background-color: #293457;">
    <section id='frontPage' class='active first'>
        <div>
            <div style="background-color: white">
                <br/>
                <br/>
                <br/>

                <h1 class="header frontpage"> โรงเรียนเล็กจะหายไป</h1>
                <h1 class="header frontpage">...ใครตัดสิน</h1>
                <br/>
                <br/>
                <img src="./images/coverDark.svg">
            </div>
            <br/>
            <br/>
            <br/>
            <br/>
            <br/>
            <br/>
            <br/>
            <br/>
            <br/>
            <br/>
        </div>        
    </section>
    <section id='background' class='active scrollchild'>
         <div class="paper">
            <h1 class="header">ความเป็นมา</h1>
                <p>ภายใต้รัฐธรรมนูญที่กำหนดให้รัฐ “ต้อง” จัดการศึกษาให้แก่ประชาชน คำถามหนึ่งที่ถูกถามและเป็นปัญหามาอย่างยาวนานว่าจะออกแบบการศึกษาหรือ “โรงเรียน” อย่างไรให้ทั้ง “ถูก” และ “ดี” ?</p>
                <p>ในมิติหนึ่งหากดู “การจัดสรรงบประมาณ” ของรัฐให้แก่โรงเรียน 40,000 แห่งในปัจจุบันแบบ “เหมาจ่าย” ต่อหัวนักเรียน ซึ่งสะท้อนมุมมองของรัฐที่ว่าเด็กทุกคนต้องได้รับทรัพยากรเท่ากันอย่างไม่เลือกปฏิบัติ</p>
                <p>แต่การตั้งกฎกติกาในปัจจุบันจะสามารถตอบโจทย์การศึกษาที่ถูกและดีในโรงเรียนที่มีความแตกต่างกันในแต่ละพื้นที่ได้ดีเพียงใด หากไม่ จะมีทางออกอะไรบ้างสำหรับโรงเรียน และใครจะเป็นคนตัดสิน… ?</p>
            <h6 class="legend">แผนที่แสดงอะไรอยู่ ?</h6>
            <div class="container">
                <div class="row">
                    <div class ="yellow" id="circle">
                    </div>
                    <div class="col">
                        <p>ตำแหน่งของโรงเรียนทั้งหมด</p>
                    </div>
                </div>
            </div>
    </section>

    <section id='composition' class='active' >    	
         <div class="paper">
            <h1 class="header">องค์ประกอบของโรงเรียน</h1>
                <p>ก่อนที่จะตอบคำถามดังกล่าว อาจจะต้อง ถอยออกไปและถามว่าอะไรทำให้โรงเรียนยังเป็นโรงเรียนอยู่ได้และทำหน้าที่ให้การศึกษาที่ถูกและดีได้?</p>
                <p>มองอย่างผิวเผินองค์ประกอบของโรงเรียนควรจะต้องประกอบด้วย การเรียนการสอนที่มีคุณภาพ, เงินงบประมาณที่เพียงพอ และต้องสอดคล้องกับพื้นที่และชุมชน เช่นเดินทางสะดวกหรือสอดรับกับความเชื่อทางศาสนา เป็นต้น</p>
            <h6 class="legend">แผนที่แสดงอะไรอยู่ ?</h6>
            <div class="container">
                <div class="row">
                    <div class ="yellow" id="circle">
                    </div>
                    <div class="col">
                        <p>จำนวนโรงเรียนทั่วประเทศ ขนาดวงที่ใหญ่และสีที่เข้มหมายถึงโรงเรียนที่มีขนาดใหญ่</p>
                    </div>
                </div>
            </div>
         </div>
    </section>

    <section id='declineTrend' class='active'>
         <div class="paper">
            <h1 class="header">ปริมาณลดลงของเด็กและโรงเรียน</h1>
            <img src="./images/Trend.png">
            <div>
                <p>อย่างไรก็ตาม จากความจริงที่ว่าภายใต้นโยบายการจัดสรรงบประมาณปัจจุบัน ขนาดของโรงเรียนย่อมเกี่ยวข้องกับความสามารถในการคงอยู่ของโรงเรียนอย่างมาก</p>
                <p>จากนโยบายยแบบนี้แปลว่าโรงเรียนขนาดใหญ่กว่าจะมีงบประมาณรวมมากกว่า ขณะที่โรงเรียนขนาดเล็กกว่าจะได้รับงบประมาณรวมน้อยกว่า แม้ว่างบประมาณต่อหัวนักเรียนจะเท่ากันก็ตาม</p>
                <p>และด้วยแนวโน้มของเด็กเกิดใหม่ที่ลดลงอย่างต่อเนื่องและรงเรียนขนาดเล็กมีแนวโน้มเพิ่มขึ้นในทุกปี ทั้งแง่จำนวนโรงเรียนและจำนวนเด็กต่อโรงเรียน และกดดันให้เสา “งบประมาณ” ของโรงเรียนคลอนแคลนใกล้จะล้มลงเต็มที</p>
            </div>
            <h6 class="legend">แผนที่แสดงอะไรอยู่ ?</h6>
            <div class="container">
                <div class="row">
                    <div class ="green" id="circle">
                    </div>
                    <div class="col">
                        <p>โรงเรียนที่จำนวนนักเรียนเปลี่ยนแปลงไปในทางบวกชัดเจน</p>
                    </div>
                </div>
                <div class="row">
                    <div class ="yellow" id="circle">
                    </div>
                    <div class="col">
                        <p>โรงเรียนที่จำนวนนักเรียนเปลี่ยนแปลงไม่คงที่</p>
                    </div>
                </div>
                <div class="row">
                    <div class ="orange" id="circle">
                    </div>
                    <div class="col">
                        <p>โรงเรียนที่จำนวนนักเรียนเปลี่ยนแปลงไปในทางลบชัดเจน</p>
                    </div>
                </div>
            </div> 
    </div>
    </section>

    <section id='crisis' class='active'>
        <div class="paper">
            <h1 class="header">วิกฤติของโรงเรียนเล็ก</h1>
            <p>งบประมาณไม่พอให้โรงเรียนเล็กดำเนินการ กลายเป็นวิกฤตของโรงเรียนขนาดเล็กที่ไม่อาจจะคงอยู่ได้ต่อไปในอนาคต และเป็นปัญหาสำคัญที่รัฐบาล รวมไปถึงประชาชนหรือชุมชนที่เกี่ยวข้องโดยตรงต้องเร่งหาทางออกให้ได้</p>
            <br/>
            <br/>      

            <h2 class="question">แล้วแต่ละคนมองทางออกของปัญหานี้ไว้อย่างไร?</h2>
            <br/>
            <br/>
            <h6 class="legend">แผนที่แสดงอะไรอยู่ ?</h6>
            <div class="container">
                <div class="row">
                    <div class ="yellow" id="circle">
                    </div>
                    <div class="col">
                        <p>โรงเรียนขนาดกลาง-ใหญ่-ใหญ่พิเศษ</p>
                    </div>
                </div>
                <div class="row">
                    <div class ="orange" id="circle">
                    </div>
                    <div class="col">
                        <p>โรงเรียนเล็ก</p>
                    </div>
                </div>
            </div>             
        </div>
    </section>

    <section id='wayout' class='active'>
        <div class="paper">
            <h1 class="header">ทางออกของโรงเรียนเล็ก</h1>
        </div>
    </section>

        <section id='collapse' class='active'>
        <div class="paper">
            <h1 class="header">ยุบและควบรวม</h1>
            <p>ทางออกแรกถูกเสนอตรงมาจากภาครัฐเองว่าหากโรงเรียนขนาดเล็กมีงบประมาณไม่เพียงพอ เพราะจำนวนนักเรียนน้อยเกินไป ดังนั้นควรจะยุบหรือควบรวมโรงเรียนขนาดเล็กดข้าด้วยกันหรือเข้ากับโรงเรียนขนาดใหญ่ขึ้น เพื่อให้มีงบประมาณเพียงพอจะจัดการศึกษาได้ รวมไปถึงภาครัฐยังเชื่ออีกว่าคุณภาพการศึกษาจะดีขึ้นด้วย</p>
            <p>อย่างไรก็ตาม ทางออกนี้อาจจะทำให้บทบาทของโรงเรียนไม่สอดคล้องกับความต้องการของชุมชนอีกต่อไป เช่น ต้องเดินทางไกลขึ้น มีต้นทุนค่าใช้จ่ายมากขึ้น หรือเรียนรู้ค่านิยมใหม่ที่ชุมชนไม่อยากให้เด็กเรียนรู้</p>
        </div>
    </section>

    <section id='casePatum' class='active'>
        <div class="paper">
            <h3 class="question">กรณีศึกษาการยุบและควบรวม: ปทุมธานี</h3>
            <div>
                <p>นอกจากนี้ การ “เลือก” ของรัฐอาจจะมีหลายแบบ และในแต่ละแบบย่อมต้องมีผลกระทบกับผู้คนที่แตกต่างกันด้วย ไม่ว่าจะเป็นต้นทุนการเดินทาง การประหยัดจากขนาดที่เกิดขึ้นในแต่ละโรงเรียน ฯลฯ</p>
                <button type="button" class="btn btn-outline-warning" onclick="loadCase('1.00')">การจัดการกรณีที่ 1: ระยะห่างน้อย</button>
                <button type="button" class="btn btn-outline-info" onclick="loadCase('2.00')">การจัดการกรณีที่ 2: ระยะห่างปานกลาง</button>
            </div>
        </div>
    </section>

    <section id='manage' class='active'>
        <div class="paper">
            <h1 class="header">การปรับตัวด้านการบริหารของโรงเรียน</h1>
            <p>ทางออกที่สองมาจากตัวโรงเรียนขนาดเล็กที่ต้องหาทางจัดรูปแบบการเรียนการสอนใหม่ให้ประหยัดงบประมาณมากขึ้น ตัวอย่างหนึ่งคือการรวมกลุ่มโรงเรียนขนาดเล็กที่ใกล้กันเป็น “เครือข่ายโรงเรียน” ที่ใช้งบประมาณร่วมกันอย่างมีประสิทธิภาพ</p>
        </div>
    </section>    

    <section id='kangjun' class='active'>
        <div class="paper">
            <h1 class="question">กรณีศึกษา: การสร้างเครือข่ายแบ่งสรรทรัพยากร</h1>
            <div>
                <p>กรณีศึกษาของ “แก่งจันทร์โมเดล” เป็นการรวมตัวกันของโรงเรียนขนาดเล็ก 4 แห่งในเขตพื้นที่จังหวัดเลยที่มีการจัดการเรียนการสอนในระดับชั้นอนุบาลาจนถึงประถม 6 ที่อยู่ห่างกันไม่ถึง 10 กิโลเมตร และรับภาระหน้าที่การสอนแค่บางช่วงชั้น เปรียบเสมือนเป็นโรงเรียนเดียวกัน แต่กระจายอยู่คนละพื้นที่ เช่น</p>

                    <p>โรงเรียน ก รับผิดชอบการสอนเฉพาะระดับชั้นประถมศึกษาปีที่ 1 – 2</p>
                    <p>โรงเรียน ข รับผิดชอบการสอนเฉพาะระดับชั้นประถมศึกษาปีที่ 3 – 4</p>
                    <p>โรงเรียน ค รับผิดชอบการสอนเฉพาะระดับชั้นประถมศึกษาปีที่ 5 – 6</p>
                <p>ประโยชน์จากการจัดการสอนแบบนี้ ทำให้จำนวนครูเฉลี่ยต่อระดับชั้นมากขึ้น นอกจากนี้ เมื่อห้องเรียนมีจำนวนนักเรียนมากขึ้นจนถึงขนาดที่เหมาะสมจะช่วยสร้างการประหยัดจากขนาด (อาจจะน้อยกว่าทางออกแรก) อย่างไรก็ตาม สำหรับการเดินทางระหว่างโรงเรียนที่อาจจะเพิ่มขึ้นยังเป็นจุดอ่อนสำคัญของโมเดลนี้ที่จะต้องจัดหาค่าใช้จ่ายมารองรับให้เพียงพอ ซึ่งอาจจะมากกว่าการประหยัดที่เกิดขึ้น (แต่อาจจะน้อยกว่าทางออกแรก)
                ขณะที่อีกสองเสาหลักแทบไม่ได้เปลี่ยบแปลง โรงเรียนยังคงอยู่เป็นศูนย์กลางของชุมชน ส่วนคุณภาพการเรียนการสอนไม่ได้เปลี่ยนแปลงไปหรืออาจจะดีขึ้น เนื่องจากยังเป็นครูชุดเดิม แต่อุปกรณ์การเรียนอาจจะดีขึ้น เพราะสามารถลงทุนให้เกิดการประหยัดจากขนาดได้</p>
            </div>

            <h6 class="legend">แผนที่แสดงอะไรอยู่ ?</h6>
            <div class="container">
                <div class="row">
                    <div class ="yellow" id="circle">
                    </div>
                    <div class="col">
                        <p>กลุ่มเคร่ือข่ายแก่งจันทร์</p>
                    </div>
                </div>
            </div> 
        </div>
    </section>

    <section id='innovation' class='active'>
        <div class="paper">
            <h1 class="header">การปรับตัวของโรงเรียนทางการเรียนการสอน</h1>
            <p style="text-decoration: line-through;">ทางออกอื่นๆ อาจจะเป็นนวัตกรรมทางการศึกษาใหม่ๆ ซึ่งจะต้องหา “สมดุล” ของ 3 เสาที่โรงเรียนจำเป็นต้องมี ที่ผ่านมาเองหลายคนอาจจะเห็นนวัตกรรมอย่าง “ป่าผ้าการศึกษา” เพื่อเรี่ยไรเงินงบประมาณมาสนับสนุนการศึกษาของโรงเรียนชุมชน บางแห่งเลือกปรับใช้ “การคละห้องเรียน” และจัดการศึกษาภายใต้ปรัชญาแบบใหม่ ซึ่งสามารถตอบโจทย์การประหยัดงบประมาณลงและเพิ่มคุณภาพการเรียนการสอนได้</p>
            <br/>

             <h2 class="question">แล้วแต่ละคนมองทางออกของปัญหานี้ไว้อย่างไร?</h2>

        <h6 class="legend">แผนที่แสดงอะไรอยู่ ?</h6>
            <div class="container">
                <div class="row">
                    <div class="col">
                        <p>กลุ่มจังหวัดที่นำนวัตกรรมไปใช้</p>
                    </div>
                </div>
            </div> 
        </div>
    </section>

    <section id='summary' class='active'>
        <div class="paper">
            <h1 class="header">บทสรุป</h1>
            <p>หากถามว่าใครต้องตัดสิน… อาจจะตอบไม่ได้ง่ายนัก แต่ละชุมชน แต่ละโรงเรียน ต่างมีความพร้อมและความต้องการที่แตกต่างกันไป ในมุมมองภาครัฐอาจจะต้องการควบรวมโรงเรียนให้ใหญ่และมีงบประมาณมากขึ้น</p>
            <p>ส่วนมุมมองโรงเรียนอาจจะเน้นไปที่การหานวัตกรรมและการบริหารงบประมาณรูปแบบใหม่ๆ และแต่ละชุมชนเองอาจจะมีนวัตกรรมอื่นๆที่เหมาะสมกับตัวเอง หรือหลักสูตรใหม่ๆจากต่างประเทศ</p>
            <br/>
            <h2>ที่สำคัญในภาพใหญ่กว่านั้นอาจจะต้องกลับมาตั้งคำถามกับรูปแบบการจัดสรรงบประมาณ</h2>
            <br/>
            <h2 class="question">เพราะการจัดสรรงบประมาณอย่าง “เท่ากัน” อาจจะไม่ได้เท่ากับ “เท่าเทียม” เสมอไป</h2>
        </div>
    </section> 

    <section id='thankYou' class='active'>
        <div class="paper">
            <h1 class="header blue">ขอขอบคุณ</h1>
            <h2>ข้อมูลและคำแนะนำ</h2>
            <br/>
            <div class="container">
                <div class="row align-items-center">
                    <div class="col-xl-5">
                        <img class="img-fluid" src="./images/logos/TDRI.png">     
                     </div>
            </div>         
            <br/>
            <p>ข้อมูลจากโครงการประเทศไทยในอนาคต Future Thailand : มิติที่ 3 การศึกษา (อยู่ในระหว่างการศึกษา) โดย สถาบันวิจัยเพื่อการพัฒนาประเทศไทย สนับสนุนโดย สำนักงานคณะกรรมการวิจัยแห่งชาติ</p>
            <br/>
            <h2>ผู้สนับสนุนโครงการ</h2>
            <br/>
            <div class="container-fluid">
                <div class="row align-items-center">
                    <div class="col-xl-6">
                        <img class="img-fluid" src="./images/logos/themomentum.svg">
                     </div>
                    <div class="col-xl-2">
                        <img class="img-fluid"src="./images/logos/jc.png">
                     </div>   
                    <div class="col-xl-4"> 
                        <img class="img-fluid"src="./images/logos/salforest.png">
                    </div>   
                </div> 
                <br/>
                <div class="row align-items-center">
                    <div class="col-xl-5">
                        <img class="img-fluid" src="./images/logos/punchup.png">      
                     </div>
                    <div class="col-xl-2">
                        <img class="img-fluid" src="./images/logos/DTAC.svg">  
                     </div>
                    <div class="col-xl-5">
                        <img class="img-fluid" src="./images/logos/TDRI.png">
                    </div>   
                </div>                                                
             </div>   
         </div>
    </section>   
    <section id='reference' class='active'>
        <div class="paper">
            <h1>ข้อมูลอ้างอิง</h1>
            <p>ข้อมูลรายชื่อโรงเรียน สพฐ โดย ระบบสารสนเทศเพื่อบริหาร การศึกษา (EMIS)</p>
            <p>Thailand GeoJson https://github.com/apisit/thailand.json</p>
            <p>ข้อมูลพื้นฐานสถานศึกษาในประเทศไทย https://data.go.th/dataset/thailand-school</p>
            <p>หมายเหตุ: ข้อมูลโรงเรียนในบทความนี้มีเพียง 60% จากข้อมูลทั้งหมดของข้อมูลพื้นฐานสถานศึกษาในประเทศไทย เนื่องจากความไม่สมบูรณ์ของข้อมูล</p>
            <p>Data Journalism Workshop 2020</p>
            <h1>คณะผู้จัดทำ</h1>
            <p>อธิวรรธน์ วงศ์ไวศยวรรณ</p>
            <p>ภูมิใจ โพธิวนากุล</p>
            <p>บูรกร ทิพยสกุลชัย</p>
        </div>
    </section>                
</div>

<script>
mapboxgl.accessToken = 'pk.eyJ1IjoiYXRoaXdhdGJpbGwiLCJhIjoiY2s3YWZiYW43MHRldTNtbnUxNXFxbjB5eSJ9.vNS0iagK7dEGlQzqXeZeWg';
var map = new mapboxgl.Map({
    container: 'map',
    style: 'mapbox://styles/athiwatbill/ck8g804954cf51invam7l3zv9',
        bearing: -0,
        center: [101.0993445, 11.034261254],
        zoom: 4.9,
        speed: 0.8,
        pitch: 0
});

var layers = [
        'SchoolInfo',
        'SmallSchool',
        'ThankYou',
        'Case',
        // 'Route',
        'Innovation',
        'Question',
        'Kangjun'
    ];

function makeActive(activeLayer) {
    map.setLayoutProperty(activeLayer, 'visibility', 'visible');
    for (let layer in layers) {  
        if (layers[layer] != activeLayer) {
            map.setLayoutProperty(layers[layer], 'visibility', 'none');
        }
    }
}    


var chapters = {
    'frontPage': {
        bearing: -0,
        center: [101.0993445, 11.034261254],
        zoom: 4.9,
        speed: 10,
        pitch: 0,        
        layer: 'SchoolInfo'
    },
    'background': {
        center: [101.0993445, 11.034261254],
        zoom: 4.9,
        speed: 0.8,
        pitch: 0,
        layer: 'SchoolInfo'
    },
    'composition': {
        bearing: -0,
        center: [101.0993445, 11.034261254],
        zoom: 4.9,
        speed: 0,
        pitch: 0,  
        layer: 'SmallSchool'
    },
    'declineTrend': {
        bearing: 0,
        center: [101.0993445, 11.034261254],
        zoom: 4.9,
        speed: 0.6,
        pitch: 0.00,
        layer: 'SmallSchool'
    },
    'crisis': {
        bearing: 0,
        center: [101.0993445, 11.034261254],
        zoom: 4.9,
        speed: 0.6,
        pitch: 0.00,
        layer: 'SmallSchool'
    },
    'wayout': {
        bearing: 0,
        center: [101.0993445, 11.034261254],
        zoom: 4.9,
        speed: 0.6,
        pitch: 0.00,
        layer: 'SmallSchool'
    },   
    'collapse': {
        bearing: 0,
        center: [101.0993445, 11.034261254],
        zoom: 4.9,
        speed: 0.6,
        pitch: 0.00,
        layer: 'SmallSchool'
    },          
    'casePatum': {
        bearing: -40,
        center: [100.690822, 14.073545],
        zoom: 10,
        speed: 4,
        pitch: -60,
        layer: 'Case'
    },
    'manage': {
        bearing: 0,
        center: [101.0993445, 11.034261254],
        zoom: 4.9,
        speed: 0.6,
        pitch: 0.00,
        layer: 'SmallSchool'
    },      
    // 'section5': {
    //     bearing: 15.20,
    //     center:  [100.690822, 14.073545],
    //     zoom: 10.56,
    //     pitch: 40.50,
    //     speed: 0.6,
    //     layer: 'Route'
    // },
    'kangjun': {
        bearing: 0,
        center:  [102.037377, 18.148933],
        zoom: 10,
        pitch: 0,
        speed: 6,
        layer: 'Kangjun'
    },
    'innovation': {
        bearing: 0,
        center: [101.0993445, 11.034261254],
        zoom: 4.9,
        pitch: 0,
        speed: 0.6,
        layer: 'Innovation'
    },
    'summary': {
        bearing: -0,
        center: [101.0993445, 11.034261254],
        zoom: 4.9,
        speed: 7,
        pitch: 0,        
        layer: 'Question'
    },    
    'thankYou': {
        bearing: 0,
        center: [100.578000,13.904003],
        zoom: 10.7,
        speed: 1,
        pitch: -40,
        layer: 'ThankYou'
    },
    'reference': {
        bearing: 0,
        center: [100.578000,13.904003],
        zoom: 10.7,
        speed: 1,
        pitch: -40,
        layer: 'ThankYou'
    },
};
// On every scroll event, check which element is on screen
window.onscroll = function() {
    var chapterNames = Object.keys(chapters);

    for (var i = 0; i < chapterNames.length; i++) {
        var chapterName = chapterNames[i];

        if (isElementOnScreen(chapterName)) {
            setActiveChapter(chapterName);
            break;
        }
    }
};
var activeChapterName = 'baker';
function setActiveChapter(chapterName) {
    // console.log('setActiveChapter ' + chapterName)
        // console.log('activeChapterName ' + activeChapterName)

    if (chapterName === activeChapterName) return;
    map.flyTo(chapters[chapterName]);
    document.getElementById(chapterName).setAttribute('class', 'active');
        // document.getElementById(activeChapterName).setAttribute('class', '');

    // document.getElementById(activeChapterName).setAttribute('class', '');
    activeChapterName = chapterName;

    makeActive((chapters[chapterName]).layer)
}
function isElementOnScreen(id) {
    var element = document.getElementById(id);
    var bounds = element.getBoundingClientRect();
    return bounds.top < window.innerHeight && bounds.bottom > 0;
}




  map.on('load', function () {
     var popup = new mapboxgl.Popup({
            closeButton: false,
            closeOnClick: false
        });

        map.on('mouseenter', 'Case', function(e) {
            // Change the cursor style as a UI indicator.
            map.getCanvas().style.cursor = 'pointer';

            // Populate the popup and set its coordinates
            // based on the feature found.

            popup.setLngLat(e.features[0].geometry.coordinates)
                .setHTML(e.features[0].properties.OriginSchool)
                .addTo(map);
        });

        map.on('mouseleave', 'Case', function() {
            map.getCanvas().style.cursor = '';
            popup.remove();
        });

        map.on('mouseenter', 'SchoolInfo', function(e) {
            // Change the cursor style as a UI indicator.
            map.getCanvas().style.cursor = 'pointer';

            // Populate the popup and set its coordinates
            // based on the feature found.

            popup.setLngLat(e.features[0].geometry.coordinates)
                .setHTML(e.features[0].properties.name)
                .addTo(map);
        });

        map.on('mouseleave', 'SchoolInfo', function() {
            map.getCanvas().style.cursor = '';
            popup.remove();
        });


            map.loadImage(
                'https://upload.wikimedia.org/wikipedia/commons/thumb/f/f8/Question_mark_alternate.svg/1200px-Question_mark_alternate.svg.png',
                function(error, image) {
                    if (error) throw error;
                    map.addImage('question', image);
                    map.addSource('point', {
                        'type': 'geojson',
                        'data': {
                            'type': 'FeatureCollection',
                            'features': [
                                {
                                    'type': 'Feature',
                                    'geometry': {
                                        'type': 'Point',
                                        'coordinates': [101.0993445, 11.034261254]
                                    }
                                }
                            ]
                        }
                    });

                    // map.addLayer({
                    //     'id': 'Question',
                    //     'type': 'symbol',
                    //     'source': 'point',
                    //     'visibility' : 'none',
                    //     'layout': {
                    //         'icon-image': 'question',
                    //         'icon-size': 0.25
                    //     }
                    // });
                }
            );
  


  

        // map.addSource('route', {
        // 'type': 'geojson',
        // 'data': {
        // 'type': 'Feature',
        // 'properties': {},
        // 'geometry': {
        // 'type': 'LineString',
        // 'coordinates': [
        // [101.0993445, 11.034261254],
        // [100.690822, 14.073545]
        // ]
        // }
        // }
        // });

        // map.addLayer({
        // 'id': 'Route',
        // 'type': 'line',
        // 'source': 'route',
        // 'layout': {
        // 'line-join': 'round',
        // 'line-cap': 'round'
        // },
        // 'paint': {
        // 'line-color': '#888',
        // 'line-width': 8
        // }
        // });

        makeActive('SchoolInfo')

        });

 map.on('styledata', function() {
   // makeActive('SchoolInfo')
 });




</script>
</body>
</html>